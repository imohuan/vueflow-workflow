# 阶段 1 - 快速开始指南

> **完成日期**：2025-11-05  
> **当前状态**：✅ 核心功能已完成并可体验

---

## 🚀 启动项目

```bash
cd e:\Code\Git\ai-browser-tools
pnpm dev
```

访问：`http://localhost:5173/preview/canvas`

---

## 🎮 功能体验

### 1. 左侧导航栏

**位置**：窗口最左侧，窄侧边栏

**功能**：
- 点击图标切换面板内容
- 再次点击已激活的图标关闭面板

**可用 Tab**：
- 🗂️ **工作流**（完整功能）⭐
- 📦 **节点库**（完整功能）⭐
- 🔢 **变量**（完整功能）⭐
- 📝 **执行记录**（完整功能）⭐
- 🧪 **测试菜单**（完整功能）⭐
- ⚙️ **设置**（完整功能）⭐

### 2. 左侧浮动面板

**位置**：导航栏右侧，画布左侧

**功能**：
- 根据选中的 Tab 动态显示内容
- 点击右上角 ✕ 关闭面板
- 宽度可通过测试菜单调整（Small/Medium/Large）

**动画效果**：
- 滑入/滑出动画
- 平滑过渡

### 3. 测试菜单面板 ⭐

**打开方式**：点击左侧导航栏的 **测试菜单** 图标

**测试分类**：

#### 📦 弹窗测试

- **信息 Modal**：显示信息提示弹窗
- **全屏编辑器**：打开全屏代码编辑器
- **确认对话框**：显示确认操作对话框
- **提示消息**：显示轻量级消息提示

#### 📐 面板测试

- **Small 尺寸**：面板宽度 280px
- **Medium 尺寸**：面板宽度 360px
- **Large 尺寸**：面板宽度 480px
- **重置面板**：恢复默认设置

#### 🎨 画布测试

- **添加测试节点**：在画布上添加 3 个测试节点
- **模拟执行**：模拟工作流执行过程
- **测试连线**：连接前两个节点
- **清空画布**：清除所有节点和连线

#### 💾 数据测试

- **加载示例工作流**：加载预设的示例工作流（3 个节点 + 2 条连线）
- **导出画布数据**：将画布数据复制到剪贴板（JSON 格式）
- **重置所有状态**：清空所有数据和状态

#### 🎭 UI 状态测试

- **切换主题**：切换亮色/暗色主题（待实现）
- **显示加载状态**：显示 2 秒加载动画
- **显示错误状态**：显示错误提示消息
- **显示空状态**：显示空状态提示

### 4. 信息 Modal

**触发方式**：点击测试菜单中的 **信息 Modal** 按钮

**特性**：
- 支持 4 种类型（info、success、warning、error）
- 每种类型有不同的图标和颜色
- 支持多行文本
- 点击 "知道了" 关闭

**图标对应**：
- 🔵 Info - 蓝色信息图标
- 🟢 Success - 绿色对勾图标
- 🟡 Warning - 黄色警告图标
- 🔴 Error - 红色错误图标

### 5. 全屏编辑器 Modal

**触发方式**：点击测试菜单中的 **全屏编辑器** 按钮

**功能**：
- **语言切换**：支持 8 种语言（JavaScript、TypeScript、JSON、HTML、CSS、Python、YAML、Markdown）
- **代码格式化**：JSON 自动格式化（其他语言待实现）
- **复制代码**：一键复制到剪贴板
- **保存/取消**：保存代码或取消编辑

**快捷操作**：
1. 修改代码内容
2. 点击 "格式化"（仅 JSON 有效）
3. 点击 "复制" 复制到剪贴板
4. 点击 "保存" 保存更改

### 6. 调试信息

**位置**：测试菜单面板底部

**显示内容**：
- 当前 Tab
- 面板可见状态
- 面板宽度
- 面板尺寸预设
- 节点数量
- 连线数量

**用途**：实时查看应用状态，方便调试

---

## 🎯 推荐体验流程

### 基础流程

1. **启动项目**：`pnpm dev`
2. **访问页面**：`http://localhost:5173/preview/canvas`
3. **打开测试菜单**：点击左侧导航栏的测试菜单图标（🧪）
4. **查看调试信息**：面板底部显示当前状态

### 弹窗体验

1. 点击 **信息 Modal** 按钮
2. 查看弹窗内容和图标
3. 点击 "知道了" 关闭
4. 点击 **全屏编辑器** 按钮
5. 修改代码内容
6. 切换语言（下拉选择）
7. 点击 "格式化"（JSON 语言）
8. 点击 "复制" 复制代码
9. 点击 "保存" 或 "取消"

### 面板体验

1. 点击 **Small 尺寸** 按钮
2. 观察面板宽度变化（280px）
3. 点击 **Large 尺寸** 按钮
4. 观察面板宽度变化（480px）
5. 查看底部调试信息（宽度显示更新）
6. 点击 **重置面板** 恢复默认

### 画布体验

1. 点击 **添加测试节点** 按钮
2. 观察画布上出现 3 个节点
3. 查看底部调试信息（节点数量 = 3）
4. 点击 **测试连线** 按钮
5. 观察节点之间的连线
6. 查看调试信息（连线数量 = 1）
7. 点击 **模拟执行** 按钮
8. 观察执行动画（1.5 秒）
9. 点击 **清空画布** 按钮
10. 确认清空操作

### 数据体验

1. 点击 **加载示例工作流** 按钮
2. 观察画布加载示例数据（3 个节点 + 2 条连线）
3. 点击 **导出画布数据** 按钮
4. 打开浏览器控制台查看 JSON 数据
5. 剪贴板中已有数据（Ctrl+V 粘贴查看）
6. 点击 **重置所有状态** 按钮
7. 确认重置操作

### Tab 切换体验

1. 点击 **工作流** Tab
2. 面板内容切换为工作流树（示例数据）
3. 点击 **节点库** Tab
4. 面板内容切换为节点库（3 个分类 + 17 个节点）
5. 再次点击 **节点库** Tab
6. 面板关闭（滑出动画）
7. 点击任意 Tab 重新打开面板

### 工作流面板体验 ⭐

**打开方式**：点击左侧导航栏的 **工作流** 图标

**功能特性**：
- 树形结构展示工作流和文件夹
- 搜索工作流功能
- 创建新工作流/文件夹
- 双击工作流加载到画布
- 显示最近使用和模板库

**操作步骤**：
1. 查看 "我的工作流" 分组
2. 双击 "数据采集流程" 加载工作流
3. 在搜索框输入关键词过滤
4. 点击 "新建工作流" 按钮
5. 右键点击工作流查看菜单

### 节点库面板体验 ⭐

**打开方式**：点击左侧导航栏的 **节点库** 图标

**功能特性**：
- 3 个节点分类（浏览器操作、数据处理、流程控制）
- 17 个预定义节点
- 搜索节点功能（支持名称、描述、标签）
- 拖拽节点到画布（待接入 VueFlow）

**节点分类**：

**浏览器操作（5 个）**：
- 打开网页、点击元素、输入文本、截图、获取内容

**数据处理（5 个）**：
- 数据转换、数据过滤、数据聚合、数据解析、数据验证

**流程控制（4 个）**：
- 条件分支、循环、等待、终止

**操作步骤**：
1. 展开 "浏览器操作" 分类
2. 查看节点列表和描述
3. 点击节点查看详情
4. 在搜索框输入 "点击" 过滤节点
5. 拖拽节点到画布（需接入 VueFlow）

### 变量面板体验 ⭐

**打开方式**：点击左侧导航栏的 **变量** 图标

**功能特性**：
- 支持 5 种变量类型（string、number、boolean、object、array）
- 添加、编辑、删除变量
- 搜索变量功能
- JSON 格式验证
- 实时更新

**示例变量**：
- `baseUrl`（string）- 网站基础 URL
- `timeout`（number）- 请求超时时间
- `debug`（boolean）- 是否启用调试
- `headers`（object）- HTTP 请求头
- `userList`（array）- 用户列表

**操作步骤**：
1. 查看预设的变量列表
2. 点击 "添加变量" 按钮
3. 修改变量值（根据类型显示不同的输入控件）
4. 对于 object/array 类型，编辑 JSON 格式
5. 点击删除按钮删除变量
6. 在搜索框输入关键词过滤变量

### 执行历史面板体验 ⭐

**打开方式**：点击左侧导航栏的 **执行记录** 图标

**功能特性**：
- 时间线展示执行记录
- 状态过滤（全部、执行中、成功、失败、已取消）
- 显示执行详情（节点数、成功数、失败数、耗时）
- 查看详情、重新执行、删除记录
- 清空所有历史

**执行状态**：
- 🔵 执行中 - 正在运行
- 🟢 成功 - 全部节点执行成功
- 🔴 失败 - 部分节点执行失败
- 🟡 已取消 - 用户手动取消

**操作步骤**：
1. 查看执行历史时间线
2. 点击状态过滤器（如 "失败"）
3. 查看失败记录的错误信息
4. 点击 "重新执行" 按钮
5. 点击 "删除" 删除单条记录
6. 点击 "清空历史" 清除所有记录

### 设置面板体验 ⭐

**打开方式**：点击左侧导航栏的 **设置** 图标

**功能特性**：
- JSON Schema 驱动的配置表单
- 4 个配置分组
- 20+ 个配置项
- 保存、重置、导出功能
- localStorage 持久化

**配置分组**：

**常规设置**：
- 主题（亮色/暗色/自动）
- 自动保存
- 网格大小
- 对齐到网格
- 界面语言

**执行设置**：
- 执行模式（Worker/Server）
- 最大并发节点数
- 默认超时时间
- 错误重试
- 最大重试次数

**Server 配置**：
- Server 地址
- API Key
- 使用 SSL

**高级设置**：
- 调试模式
- 日志级别
- 启用数据分析
- 自定义配置（JSON）

**操作步骤**：
1. 滚动查看所有配置分组
2. 修改 "主题" 选项
3. 调整 "网格大小" 数值
4. 切换 "自动保存" 开关
5. 编辑 "自定义配置" JSON
6. 点击 "保存配置" 按钮
7. 点击 "导出配置" 复制到剪贴板
8. 点击 "重置为默认值" 恢复默认

---

## 📊 实时状态监控

### 调试信息说明

测试菜单面板底部的调试信息实时显示：

```
当前 Tab: test-menu
面板可见: true
面板宽度: 360px
面板尺寸: medium
节点数量: 3
连线数量: 1
```

**字段含义**：

- **当前 Tab**：当前激活的 Tab ID
- **面板可见**：浮动面板是否显示
- **面板宽度**：浮动面板当前宽度（px）
- **面板尺寸**：尺寸预设（small/medium/large）
- **节点数量**：画布上的节点数量
- **连线数量**：画布上的连线数量

---

## 🎨 UI 交互说明

### 动画效果

- **面板滑入/滑出**：300ms 缓动动画
- **Modal 淡入/淡出**：NaiveUI 内置动画
- **按钮悬停**：即时高亮反馈

### 交互反馈

- **成功操作**：绿色提示消息（右上角）
- **错误操作**：红色提示消息（右上角）
- **信息提示**：蓝色提示消息（右上角）
- **加载状态**：转圈动画 + 提示文字

### 确认对话框

涉及数据清除的操作会弹出确认对话框：
- 清空画布
- 重置所有状态

---

## 🐛 问题排查

### 页面无法访问

**问题**：访问 `http://localhost:5173/preview/canvas` 显示 404

**解决**：
1. 检查开发服务器是否启动（`pnpm dev`）
2. 确认端口 5173 没有被占用
3. 尝试访问根路径 `http://localhost:5173`

### Tab 点击无反应

**问题**：点击左侧 Tab 图标，面板没有显示

**排查步骤**：
1. 打开浏览器控制台（F12）
2. 查看是否有 JavaScript 错误
3. 检查 UI Store 是否正常加载（控制台输入 `console.log(useUiStore())`）

### 测试按钮无效

**问题**：点击测试菜单中的按钮没有响应

**排查步骤**：
1. 打开浏览器控制台
2. 点击按钮时查看是否有错误输出
3. 检查 NaiveUI 是否正确加载

### Modal 不显示

**问题**：点击弹窗测试按钮，Modal 没有出现

**排查步骤**：
1. 检查 InfoModal 和 FullscreenEditorModal 组件是否已引入 CanvasView
2. 检查 ModalShell 组件是否正常
3. 查看控制台错误信息

---

## 📝 开发者注意事项

### Store 使用

所有面板状态通过 **UI Store** 管理：

```typescript
import { useUiStore } from "@/newCode/stores/ui";

const uiStore = useUiStore();

// 打开面板
uiStore.setActiveTab("workflows");

// 关闭面板
uiStore.closeFloatingPanel();

// 显示 Modal
uiStore.showInfoModal("标题", "内容", "info");
```

### 添加新面板

在 `FloatingPanel.vue` 中添加面板组件映射：

```typescript
const panelComponents: Record<string, Component> = {
  "my-panel": MyPanelComponent,
  // ...
};

const panelTitles: Record<string, string> = {
  "my-panel": "我的面板",
  // ...
};
```

### 添加新 Tab

在 `config/tabs.ts` 中添加 Tab 配置：

```typescript
export const mainTabs: TabItem[] = [
  {
    id: "my-tab",
    label: "我的 Tab",
    icon: MyIcon,
    description: "描述信息",
  },
  // ...
];
```

---

## 🎉 成果展示

### 已实现功能

**核心框架**：
- ✅ 左侧导航栏（6 个 Tab）
- ✅ 浮动面板（动态内容渲染）
- ✅ 面板尺寸调整（3 种预设）
- ✅ 信息 Modal（4 种类型）
- ✅ 全屏编辑器 Modal（8 种语言）

**功能面板**：
- ✅ 工作流面板（树形结构 + 搜索 + CRUD）
- ✅ 节点库面板（3 个分类 + 17 个节点 + 搜索）
- ✅ 变量面板（5 种类型 + JSON 验证）
- ✅ 执行历史面板（时间线 + 状态过滤）
- ✅ 设置面板（配置系统 + 持久化）
- ✅ 测试菜单（20+ 个测试按钮）

**配置系统**：
- ✅ ConfigField 组件（11 种字段类型）
- ✅ ConfigRenderer 组件（JSON Schema 驱动）
- ✅ 字段验证（必填、最小值、最大值、正则等）
- ✅ 4 个配置分组 + 20+ 个配置项

**辅助功能**：
- ✅ 画布操作测试
- ✅ 数据导入/导出
- ✅ UI 状态测试
- ✅ 实时调试信息

### 代码质量

- ✅ 0 Lint 错误
- ✅ 完整 TypeScript 类型
- ✅ 规范统一的代码风格
- ✅ 清晰的注释和文档

---

## 📚 相关文档

- [产品文档](./产品文档.md) - 完整的产品设计
- [实施日志](./implementation-log.md) - 开发记录
- [交付清单](./阶段1-交付清单.md) - 详细交付物
- [目录结构](./directory-structure.md) - 项目结构说明

---

**祝你使用愉快！** 🎊

如有问题，请查看[问题排查](#-问题排查)部分或联系开发团队。

